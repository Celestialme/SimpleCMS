<script lang="ts">
	import { flip } from 'svelte/animate';
	import { dndzone } from 'svelte-dnd-action';

	const flipDurationMs = 200;
	export let items: any;
	export let onDrop: any;

	function handleDndConsiderCards(e) {
		items = e.detail.items;
	}

	function handleDndFinalizeCards(e) {
		//console.log('Unassigned items:', e.detail.items); // <-- add this line
		onDrop(e.detail.items);
	}
</script>

<div class="ml-1 rounded-sm border border-surface-300 p-1 dark:border-surface-400">
	<h2 class="mb-2 text-center font-bold dark:text-primary-500">Unassigned</h2>
	<div
		class="my-1 flex w-full flex-wrap gap-1 overflow-x-scroll"
		use:dndzone={{ items, flipDurationMs }}
		on:consider={handleDndConsiderCards}
		on:finalize={handleDndFinalizeCards}
	>
		{#each items as item (item.id)}
			<div
				class="relative flex h-10 w-32 items-center justify-center rounded-sm border border-surface-700 bg-surface-300 text-center text-xs font-bold hover:bg-surface-400 dark:text-white"
				animate:flip={{ duration: flipDurationMs }}
			>
				{item.name}
				<iconify-icon
					icon="mdi:drag"
					width="18"
					class="absolute left-1 top-1/2 -translate-y-1/2 transform"
				/>
			</div>
		{/each}
	</div>
</div>
